<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="./km-ajax.html">

<dom-module id="km-checkout-order-shipping-details">
    <template>
        <style>
            :host {
                display: inline-block;
                padding: 20px;
                text-align: left;
            }

            #edit-link {
                float: right;
            }
            #edit-link > img {
                height: 20px;
            }
            #header{
                border-bottom: 1px solid rgb(237,237,237);
                overflow: auto;
                padding-bottom: 10px;
                margin-bottom: 10px;
            }
        </style>
        <km-ajax id="ajax"></km-ajax>
        <div id="header">
            <span>Shipped To</span>
            <a id="edit-link" href="#" hidden$="[[editable]]" on-click="_edit"><img src="/assets/icons/edit-80x80.png"></a>
        </div>
        <div>
            [[order.shipping_name]]
            <br><br>
            [[order.shipping_line_1]]
            <br>
            [[order.shipping_line_2]]
            <br>
            [[order.city]], [[order.state]] [[order.postal_code]]
            <br><br>
            [[order.email]]
        </div>
    </template>
    <script>
        (function () {
            Polymer({
                is: 'km-checkout-order-shipping-details',
                properties: {
                    order: {
                        type: Object,
                        value: function(){
                            return {};
                        },
                        notify: true,
                        observer: '_order_changed'
                    },
                    products: {
                        type: Array,
                        value: function(){
                            return [];
                        }
                    },
                    totalPrice: {
                        type: String,
                        value:""
                    },
                    editable: {
                        type: Boolean,
                        value: false
                    }
                },
                _edit: function(){
                    console.log("Editing Shipping Info");
                    window.location = "/checkout/shipinfo?order=" + this.order.id;
                },
                _order_changed: function(){
                    if(this.order.id === undefined){
                        return;
                    }

                    console.log("Confirm Shipping Order:", this.order);
                },
                ready: function(){

                }
            });
        })();
    </script>
</dom-module>