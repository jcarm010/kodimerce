<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="/bower_components/paper-input/paper-input.html">
<link rel="import" href="/bower_components/paper-input/paper-textarea.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">
<link rel="import" href="/bower_components/paper-spinner/paper-spinner-lite.html">
<link rel="import" href="/bower_components/iron-ajax/iron-request.html">

<dom-module id="login-component">
    <template>
        <style>
            paper-header-panel {
                margin-top: 100px;
                box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
            }
            paper-header-panel .content {
                padding: 10px;
            }
            paper-header-panel .paper-header {
                padding: 10px;
                background-color: var(--paper-indigo-500);
                color: white;
            }
            paper-button {
                width: 100%;
                margin: 0;
            }
            paper-button.indigo {
                background-color: var(--paper-indigo-500);
                color: white;
                --paper-button-raised-keyboard-focus: {
                    color: white !important;
                };
            }
            paper-spinner-lite {
                --paper-spinner-stroke-width: 1px;
                --paper-spinner-color: var(--google-green-500);
                margin-left: 5px;
            }
            *[hidden] {
                visibility: hidden;
            }
        </style>
        <div style="height: 250px;">
            <iron-request id="xhr"></iron-request>
            <paper-header-panel mode="standard">
                <div class="paper-header">
                    <h5>Login</h5>
                </div>
                <div class="content">
                    <paper-input label="Email"></paper-input>
                    <paper-input label="Password" type="password"></paper-input>
                    <paper-button raised class="custom indigo" on-click="submitLogin" disabled="{{loading}}">
                        <span hidden="{{loading}}">Login</span>
                        <paper-spinner-lite class="green" hidden="{{!loading}}" active></paper-spinner-lite>
                    </paper-button>
                </div>
            </paper-header-panel>
        </div>

    </template>
    <script>
        Polymer({
            is: 'login-component',
            properties: {
                loading: {
                    type: Boolean,
                    value: false
                }
            },
            submit: function(){
                var self = this;
                console.log("Submitting Login");
                self.loading = true;
                self.$.xhr.send({url: "/"}).then(function(req){
                    console.log("success");
                    console.log(req);
                }).catch(function(err) {
                    console.log("error");
                    console.log(err);
                }).then(function() {
                    self.loading = false;
                    self.$.xhr.abort();
                });
            }
        });
    </script>
</dom-module>